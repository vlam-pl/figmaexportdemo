@page "/"
@rendermode InteractiveServer
@inject IJSRuntime JS

<PageTitle>Design Tokens Demo</PageTitle>

<div class="demo-container">
    <div class="demo-header">
        <Title Level="1">Figma Design Tokens Demo</Title>
        <Space Align="@SpaceAlign.Center">
            <SpaceItem>
                <span class="theme-label">@(_isDark ? "Dark" : "Light")</span>
            </SpaceItem>
            <SpaceItem>
                <Switch Checked="@_isDark" CheckedChanged="@OnThemeToggle" />
            </SpaceItem>
        </Space>
    </div>
    <Paragraph>
        This page demonstrates AntDesign Blazor components styled with Figma design tokens.
    </Paragraph>

    <Divider>Buttons</Divider>
    <Space Size="@("middle")">
        <SpaceItem>
            <Button Type="@ButtonType.Primary">Primary</Button>
        </SpaceItem>
        <SpaceItem>
            <Button Type="@ButtonType.Default">Default</Button>
        </SpaceItem>
        <SpaceItem>
            <Button Type="@ButtonType.Dashed">Dashed</Button>
        </SpaceItem>
        <SpaceItem>
            <Button Type="@ButtonType.Text">Text</Button>
        </SpaceItem>
        <SpaceItem>
            <Button Type="@ButtonType.Link">Link</Button>
        </SpaceItem>
        <SpaceItem>
            <Button Danger Type="@ButtonType.Primary">Danger</Button>
        </SpaceItem>
    </Space>

    <Divider>Color Palette</Divider>
    <Row Gutter="16">
        <AntDesign.Col Span="6">
            <Card Title="Primary Colors" Size="@CardSize.Small">
                <div class="color-swatch" style="background: var(--ant-primary-color);">Primary</div>
                <div class="color-swatch" style="background: var(--ant-primary-color-hover);">Hover</div>
                <div class="color-swatch" style="background: var(--ant-primary-color-active);">Active</div>
                <div class="color-swatch" style="background: var(--ant-primary-1); color: #0d1a26;">Background</div>
            </Card>
        </AntDesign.Col>
        <AntDesign.Col Span="6">
            <Card Title="Success Colors" Size="@CardSize.Small">
                <div class="color-swatch" style="background: var(--ant-success-color);">Success</div>
                <div class="color-swatch" style="background: var(--ant-success-color-hover);">Hover</div>
                <div class="color-swatch" style="background: var(--ant-success-color-active);">Active</div>
                <div class="color-swatch" style="background: var(--ant-success-color-deprecated-bg); color: #0d1a26;">Background</div>
            </Card>
        </AntDesign.Col>
        <AntDesign.Col Span="6">
            <Card Title="Warning Colors" Size="@CardSize.Small">
                <div class="color-swatch" style="background: var(--ant-warning-color);">Warning</div>
                <div class="color-swatch" style="background: var(--ant-warning-color-hover);">Hover</div>
                <div class="color-swatch" style="background: var(--ant-warning-color-active);">Active</div>
                <div class="color-swatch" style="background: var(--ant-warning-color-deprecated-bg); color: #0d1a26;">Background</div>
            </Card>
        </AntDesign.Col>
        <AntDesign.Col Span="6">
            <Card Title="Error Colors" Size="@CardSize.Small">
                <div class="color-swatch" style="background: var(--ant-error-color);">Error</div>
                <div class="color-swatch" style="background: var(--ant-error-color-hover);">Hover</div>
                <div class="color-swatch" style="background: var(--ant-error-color-active);">Active</div>
                <div class="color-swatch" style="background: var(--ant-error-color-deprecated-bg); color: #0d1a26;">Background</div>
            </Card>
        </AntDesign.Col>
    </Row>

    <Divider>Alerts</Divider>
    <Space Direction="@SpaceDirection.Vertical" Style="width: 100%;">
        <SpaceItem>
            <Alert Type="@AlertType.Success" Message="Success" Description="This is a success alert styled with Figma tokens." ShowIcon="true" />
        </SpaceItem>
        <SpaceItem>
            <Alert Type="@AlertType.Info" Message="Info" Description="This is an info alert styled with Figma tokens." ShowIcon="true" />
        </SpaceItem>
        <SpaceItem>
            <Alert Type="@AlertType.Warning" Message="Warning" Description="This is a warning alert styled with Figma tokens." ShowIcon="true" />
        </SpaceItem>
        <SpaceItem>
            <Alert Type="@AlertType.Error" Message="Error" Description="This is an error alert styled with Figma tokens." ShowIcon="true" />
        </SpaceItem>
    </Space>

    <Divider>Tags</Divider>
    <Space>
        <SpaceItem><Tag Color="@PresetColor.Green.ToString()">Success</Tag></SpaceItem>
        <SpaceItem><Tag Color="@PresetColor.Blue.ToString()">Processing</Tag></SpaceItem>
        <SpaceItem><Tag Color="@PresetColor.Red.ToString()">Error</Tag></SpaceItem>
        <SpaceItem><Tag Color="@PresetColor.Orange.ToString()">Warning</Tag></SpaceItem>
        <SpaceItem><Tag>Default</Tag></SpaceItem>
    </Space>

    <Divider>Form Components</Divider>
    <Form Model="@_formModel" LabelColSpan="4" WrapperColSpan="20">
        <FormItem Label="Input">
            <Input @bind-Value="@context.Name" Placeholder="Enter your name" />
        </FormItem>
        <FormItem Label="Select">
            <SimpleSelect @bind-Value="@context.Option" Placeholder="Select an option">
                <SelectOptions>
                    <SimpleSelectOption Value="1" Label="Option 1" />
                    <SimpleSelectOption Value="2" Label="Option 2" />
                    <SimpleSelectOption Value="3" Label="Option 3" />
                </SelectOptions>
            </SimpleSelect>
        </FormItem>
        <FormItem Label="Switch">
            <Switch @bind-Checked="@context.Enabled" />
        </FormItem>
        <FormItem WrapperColOffset="4">
            <Button Type="@ButtonType.Primary" HtmlType="submit">Submit</Button>
        </FormItem>
    </Form>

    <Divider>Progress</Divider>
    <Space Direction="@SpaceDirection.Vertical" Style="width: 100%;">
        <SpaceItem>
            <Progress Percent="30" />
        </SpaceItem>
        <SpaceItem>
            <Progress Percent="70" Status="@ProgressStatus.Active" />
        </SpaceItem>
        <SpaceItem>
            <Progress Percent="100" />
        </SpaceItem>
        <SpaceItem>
            <Progress Percent="50" Status="@ProgressStatus.Exception" />
        </SpaceItem>
    </Space>

    <Divider>Base Color Palette (from Figma)</Divider>
    <Row Gutter="16">
        @foreach (var color in _baseColors)
        {
            <AntDesign.Col Span="4">
                <div class="palette-card">
                    <div class="palette-title">@color</div>
                    @for (int i = 1; i <= 10; i++)
                    {
                        var shade = i;
                        <div class="palette-swatch" style="background: var(--ant-@(color.ToLower())-@shade);">
                            @shade
                        </div>
                    }
                </div>
            </AntDesign.Col>
        }
    </Row>
</div>

<style>
    .demo-container {
        padding: 24px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .demo-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .theme-label {
        font-size: 14px;
        opacity: 0.65;
    }

    .color-swatch {
        padding: 12px;
        margin: 4px 0;
        color: white;
        text-align: center;
        border-radius: 4px;
        font-size: 12px;
    }

    .palette-card {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        margin-bottom: 16px;
    }

    .palette-title {
        padding: 12px;
        font-weight: 600;
        text-align: center;
        border-bottom: 1px solid rgba(128, 128, 128, 0.2);
    }

    .palette-swatch {
        padding: 8px 12px;
        color: white;
        font-size: 12px;
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    .palette-swatch:nth-child(2),
    .palette-swatch:nth-child(3),
    .palette-swatch:nth-child(4) {
        color: #0d1a26;
        text-shadow: none;
    }
</style>

@code {
    private FormModel _formModel = new();
    private string[] _baseColors = { "Seablue", "Aquamarine", "Green", "Yellow", "Orange", "Red", "Pink", "Purple", "Neutral" };
    private bool _isDark;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var theme = await JS.InvokeAsync<string>("themeManager.getTheme");
            _isDark = theme == "dark";
            StateHasChanged();
        }
    }

    private async Task OnThemeToggle(bool isDark)
    {
        _isDark = isDark;
        await JS.InvokeVoidAsync("themeManager.setTheme", isDark ? "dark" : "light");
    }

    public class FormModel
    {
        public string Name { get; set; } = "";
        public string Option { get; set; } = "";
        public bool Enabled { get; set; }
    }
}